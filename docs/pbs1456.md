# PBS 146 of X — Shell Loops & Arrays

TO DO

## Matching Podcast Episode

TO OD

## Episode Resources
TO UPDATE

* The instalment ZIP file — [pbs145.zip](https://github.com/bartificer/programming-by-stealth/raw/master/instalmentZips/pbs145.zip)

## Loop-like Commands in Bash

Bash supports four loop-like commands — `while`, `until`, `for`, and one that's a little different to the rest, `select`. All four need to be used in conjunction with the `do` and `done` commands, and all four support the flow-of-control commands `continue` & `break`.

While you can make do with just `while` loops, the reason the other three exist is to make your code shorter and more readable, so I strongly advise using them when they're the most appropriate choice!

I use the following guidance when choosing which loop command to use

1. **While loops** are designed to repeat commands while some condition remains true. E.g. *keep trying this command until it succeeds*.
2. **Until loops** are the inverse of while loops, they are designed to repeat commands while some condition remains false. E.g. *keep asking for input until you get a valid day of the week*.
3. **For loops** are designed to repeat the same command once with each of a list of values. E.g. *print the reverse of each line in this file*.
4. **Select Loops** are designed to implement menu systems — ask the user what they's like to do, do it, then ask them what they'd like to do next, then do it …

Regardless of which of the commands you use, the basic structure of the loops is the same:

```bash
LOOP_COMMAND LOOP_ARGS
do
    # the commands to be looped
done
```

Where `LOOP_COMMAND` is one of `while`, `until`, `for` & `select`, and `LOOP_ARGS` is the appropriate extra info the chosen loop command needs.

At any point between the `do` and `done` commands the `continue` command will jump to the next iteration of the loop, and the `break` command will end the loop entirely.

### Simple While Loops

Like the `if` command, the `while` command expects to be passed a command to execute as the first argument, and any arguments to be passed to that command as subsequent arguments. The exit code will determine whether or not the commands between the `do` and `done` commands get executed. If the exit code is *success*, the content of the loop get execute, and the condition is tested again. If the exit code is *success* again the loop gets execute again. The loop ends the first time the exit code is not *success*.

TO DO — EXAMPLE

### Until Loops

The `until` command works just like the `while` command except that the commands between `do` and `done` get executed as long as the exit code is **not** *success*.

TO DO — EXAMPLE

### For Loops

The `for` command requires at least three arguments — a name to use when creating a variable that will exist within the loop, the keyword `in` and one or more values to loop over as separate arguments. Shell glob commands can be used in the arguments.

The commands between `do` and `done` get executed once for each additional argument after `in`, and their value will be available as a variable with the name passed as the first argument to `for`.

TO DO — EXAMPLES

### Select Menu Loops

The `select` command uses the same syntax as the `for` command, but instead of running the commands between `do` and `done` once for each additional argument after `in`, the user is presented with a menu showing all the values, and asked to enter a number representing their choice, that value will go into the loop variable, and the code will execute. This will continue for ever unless the `exit` or `break` commands get executed within the loop.

TO DO – EXAMPLE

## Final Thoughts

TO DO
