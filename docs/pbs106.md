# PBS 106 of X â€” Time Travel with Git

In the previous instalment we learned to look back in time with `git diff`, to export the contents of our repository from some point in the past with `git archive`, and finally, to travel to the past by using `git checkout` to bring load the contents of an arbitrary commit into our working directory.

We did out time travel very cautiously, we make sure to have a clean working copy before checking out the commit form the past, and we made sure not to change anything in the working copy while we were in the past because Git can't commit changes while our currently checked out commit is not at the *head* (end) of a branch. We learned that Git refers to this state somewhat melodramatically as a *detached head state*.

The focus of this instalment will be to travel through time while keeping our *head* attached! 

## Matching Podcast Episode

TO DO

## Instalment Resources

* The instalment ZIP file â€” [pbs106.zip](https://github.com/bartificer/programming-by-stealth/raw/master/instalmentZips/pbs106.zip).

## Playing Along

If you're like to play along with the examples you'll need to download this instalment's ZIP file and unzip it. Open a terminal and change into the folder you extracted the ZIP into. You'll find a file in there named `pbs106a.bundle`, this is a bundled version of the repository we created in the previous instalment, with a few additional commit added so we have something to go back in time to fetch.

Like we did in the previous instalment, we need to make a new repository and import all the commits from the bundle. We'll name our new repository `pbs106a`. To create this new repo we'll take the following steps:

1. create a folder named `pbs106a`
2. change into that folder
3. initialise it as a Git repo
4. if needed, change the default branch from `master` to `main`
5. import all the commits from the bundle into our new repository

The commands to do all this are

```
mkdir pbs106a
cd pbs106a
git init
[ `git symbolic-ref --short HEAD` = 'master' ] && git checkout -b main
git pull ../pbs106a.bundle
```

## Git Hashes Revisited â€” It's OK to be Brief!

In the podcast episode accompanying the previous instalment myself and Allison talked about the existence of *'shorter hashes'* for Git commits, but we didn't go into detail on them for a very simple reason â€” I hadn't gotten around to figuring out exactly what the situation was with those shorter hashes.

Thanks to a flood of wonderful listener feedback I was saved the hassle of figuring it out for myself ðŸ™‚

The shorter hashes are simply the first few characters of the longer hashes! Git is perfectly happy to use truncated hashes as long as the following two things are true:

1. The truncated hash is at least 4 characters long.
2. The truncated hash is unambiguous, that is to say, there is only one commit in the repo who's full hash starts with the truncated hash.

From now on we will be using truncated hashes in our examples, allowing us to keep our commands from scrolling quite as far off the edge of the page ðŸ˜‰

## More Compact Git Logs

On a related note â€” when looking for a specific commit the rather verbose default output from the `git log` command requires a lot of scrolling. We can greatly shorten the output with the `--oneline` flag. This will show each commit on a single line as just a truncated hash followed by the first line of the commit message. You don't see date or author details, but assuming you use good commit messages, this should be all the information you need.

Let's use this flag to see what changes I made to the example repository between instalments:

```
bart-imac2018:pbs106a bart% git log --oneline
cef53ce (HEAD -> main) updated instalment references to 106
9e0df06 Removed the Easter Eggs
43bca0f Added Easter Egg into HTML file
c50e09c added a little Easter Egg
27d4f35 Updated PBS instalment number to 105 in all files
ff15d67 Fixed Markdown link in HTML file
ff8bc62 Added my history of programming in Hello World programs
2e3a0ce Correct semantic markup by moving title and lead into header and adding a footer
80025b1 Added link to Wikipedia article on the Hello World meme
a6d4bfd Added Bootstrap licensing info to README
7cf6b0b Moved from plain HTML to Bootstrap
c88546e Fixed silly typo in README
d58f072 initial version
bart-imac2018:pbs106a bart%
```

We can shorten the output even further by using the `-n` flag to limit the output to just the `n` most recent commits:

```
bart-imac2018:pbs106a bart% git log --oneline -n 5
cef53ce (HEAD -> main) updated instalment references to 106
9e0df06 Removed the Easter Eggs
43bca0f Added Easter Egg into HTML file
c50e09c added a little Easter Egg
27d4f35 Updated PBS instalment number to 105 in all files
bart-imac2018:pbs106a bart%
```

Note that this compact view does show that commit `cef53ce` is the currently checked out commit (`HEAD`), and that it is at the head of the branch `main`.

## Git Stashes

TO DO

## Creating Branches

TO DO

## Final Thoughts

In this instalment we learned to look into the past, but not bring versions of files from the past back to the future, or forward to a new alternative future. We'll learn how to do both of those things in the next instalment. That is to say, we'll learn how to use stashes to bring changes from the past back to the future we came from, and how to create new branches to move towards alternative futures.