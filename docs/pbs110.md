# PBS 110 of X — Merge Conflicts

As our branching strategy has evolved it's sprouted ever more simultaneously edited branches. The more branches under active development, the greater the chance there will be merge conflicts. So far Up to this point I've been very careful with how I've structured the examples to ensure there were never any conflicts. In this instalment I've done the opposite — intentionally engineered a conflict so we can learn how to resolve it!

## Matching Podcast Episode

TO DO

## Instalment Resources

* The instalment ZIP file — [pbs110.zip](https://github.com/bartificer/programming-by-stealth/raw/master/instalmentZips/pbs110.zip).

## Playing Along 

If you're like to play along with the examples you'll need to download this instalment's ZIP file and unzip it. Open a terminal and change into the folder you extracted the ZIP into. You'll find a file in there named `pbs110a.bundle`, this is a bundled version of the repository we created in the previous instalment, with some additional commits added to prepare the ground for a merge commit. We'll look at these commits in detail later.

Like we did in the previous two instalments, we need to make a new repository and import all the branches and tags from the bundle. We'll name our new repository `pbs110a`. To create this new repo we'll take the following steps:

1. create a folder named `pbs110a`
2. change into that folder
3. initialise it as a Git repo
4. if needed, change the default branch from `master` to `main`
5. import all branches and tags from the bundle into our new repository

The commands to do all this are

```
mkdir pbs110a
cd pbs110a
git init
[ `git symbolic-ref --short HEAD` = 'master' ] && git checkout -b main
git fetch --update-head-ok ../pbs110a.bundle '*:*'
git checkout main
```

## A Quick Recap on Merging Branches

The `git merge` command is used to integrate the changes on another branch into the currently checked out branch. This means that to merge a dev branch into the `main` branch you must have the `main` branch checked out.

It's important that the current working copy be clean before attempting a merge. If you try to merge when your working copy is not clean you'll get an error.

When ever possible Git will automatically merge the changes entirely automatically, but, that's not always possible. When the same line is edited on both branches some form of human judgement is needed to figure out what to keep, what to discard, or, how to merge the two versions into some sort of unified new whole. When Git hits a conflict it asks its human master for help! Git will pause the merge and mark the affected file(s) as being conflicted. At that point a human has to look at each conflict, resolve it, and then tell Git to continue with the merge.

There is also the *run away* option — you can reverse the conflicted merge and get back to a clean working directory just like it was before the doomed merge was started!

## Resolving Merge Conflicts — A Worked Example

If you open `index.html` in our newly restored `pbs110a` repo in both your browser and favourite text editor you'll see that there have been two changes on the `main` branch since the end of the previous instalment:

1. The instalment numbers have all been bumped from 109 to 110.
2. A new *'Powered by Open Source'* section has been added consisting of a header and a paragraph that list the open source libraries the dummy page uses.

LEFT OFF HERE!!!

## Final Thoughts

TO DO